
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<style>
.container { margin-top: 20px; margin-bottom: 20px; }
.ticker-template { display: none; }
</style>

<div class="container">
	<div class="page-header">
		<h1>Pebethicker</h1>
	</div>
	<form>
		<div class="form-group">
		<h4>Select tickers to show&thinsp;:</h4>
		</div>
		<div class="form-group">
			<div class="ticker-template checkbox">
				<label>
					<input name="tickers" class="ticker-checkbox" type="checkbox">
					<span class="ticker-name"></span>
				</label>
			</div>
		</div>
		<div class="form-group">
			<button class="btn btn-primary" onclick="save(); event.preventDefault();">Save</button>
		</div>
	</form>
	<p class="text-muted"><strong>Pebethicker</strong> uses <a href="http://www.gatecoin.com/">Gatecoin</a> public API.</p>
	<small class="text-muted">URL: <span id="url"></span></small>
</div>

<script src="//code.jquery.com/jquery-2.2.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script>
$('#url').text(location.href);

var availableTickers = ['BTCEUR', 'BTCHKD', 'BTCUSD', 'ETHBTC', 'ETHEUR', 'REPBTC'];
availableTickers.forEach(function(ticker) {
	var $tickerElement = $('.ticker-template').clone();
	$tickerElement.find('.ticker-name').text(ticker);
	$tickerElement.find('.ticker-checkbox').val(ticker);
	$tickerElement.removeClass('ticker-template');
	$tickerElement.appendTo($('.ticker-template').parent());
});

function save() {
	var options = { tickers: [] };
	$('form').serializeArray().forEach(function(ticker) {
		options.tickers.push(ticker.value);
	});
	document.location = 'pebblejs://close#' + encodeURIComponent(JSON.stringify(options));
}
</script>

